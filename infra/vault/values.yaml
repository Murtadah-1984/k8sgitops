# HashiCorp Vault Helm Values
# Production Vault configuration with HA mode

server:
  enabled: true
  image:
    repository: hashicorp/vault
    tag: "1.15.2"
  
  # High Availability
  ha:
    enabled: true
    replicas: 3
    config: |
      ui = true
      
      listener "tcp" {
        tls_disable = 0
        address = "[::]:8200"
        cluster_address = "[::]:8201"
        tls_cert_file = "/vault/tls/server.crt"
        tls_key_file = "/vault/tls/server.key"
      }
      
      storage "consul" {
        path = "vault/"
        address = "HOST_IP:8500"
      }
      
      seal "awskms" {
        region = "us-east-1"
        kms_key_id = "YOUR_KMS_KEY_ID"
      }
  
  # Resource limits
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi
  
  # Service
  service:
    type: ClusterIP
    annotations:
      service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
  
  # Ingress
  ingress:
    enabled: true
    ingressClassName: kong
    annotations:
      konghq.com/strip-path: "true"
    hosts:
      - host: vault.arajeez-cloud.com
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: vault-tls
        hosts:
          - vault.arajeez-cloud.com

# Vault Agent Injector
injector:
  enabled: true
  resources:
    limits:
      cpu: 500m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

# External Secrets integration
externalSecretsOperator:
  enabled: true

